<% message = local_assigns[:message] %>
<% user_id = local_assigns[:user_id] %>
<% if message.user_id == user_id %>
  <!-- Own message -->
  <div class="d-flex align-items-start justify-content-end mb-3" data-user-id="<%= message.user_id %>">
    <div class="pe-2 me-1" style="max-width: 348px;">
      <div class="bg-info bg-gradient text-light p-3 mb-1" style="border-top-left-radius: .5rem; border-bottom-right-radius: .5rem; border-bottom-left-radius: .5rem;"><%= message.content %></div>
      <div class="d-flex justify-content-end align-items-center fs-sm text-muted">
        <%= message.created_at.strftime('%Y年%m月%d日 %H:%M') %>
      </div>
    </div>
  </div>
<% else %>
  <!-- Message from others -->
  <div class="d-flex align-items-start mb-3" data-user-id="<%= message.user_id %>">
    <%= message.user.username %>
    <div class="ps-2 ms-1" style="max-width: 348px;">
      <div class="bg-secondary p-3 mb-1" style="border-top-right-radius: .5rem; border-bottom-right-radius: .5rem; border-bottom-left-radius: .5rem;"><%= message.content %></div>
      <div class="fs-sm text-muted">
        <%= message.created_at.strftime('%Y年%m月%d日 %H:%M') %>
      </div>
    </div>
  </div>
<% end %>
